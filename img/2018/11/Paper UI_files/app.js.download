angular.module("PaperUI",["PaperUI.controllers","PaperUI.controllers.control","PaperUI.controllers.setup","PaperUI.controllers.configuration","PaperUI.things","PaperUI.bindings","PaperUI.items","PaperUI.controllers.extension","PaperUI.controllers.rules","PaperUI.services","PaperUI.services.rest","PaperUI.services.repositories","PaperUI.extensions","PaperUI.directive.configDescription","ngRoute","ngResource","ngMaterial","ngMessages","ngSanitize","ui.sortable","material.components.expansionPanels"]).config(["$routeProvider","$httpProvider","globalConfig","$mdDateLocaleProvider","moduleConfig","dateTimeProvider",function(e,t,r,n,i,o){e.when("/control",{templateUrl:"partials/control/control.html",controller:"ControlPageController",title:"Control",simpleHeader:!0,reloadOnSearch:!1}).when("/setup",{redirectTo:"/inbox/search"}).when("/inbox",{redirectTo:"/inbox/search"}).when("/inbox/setup",{redirectTo:"/inbox/setup/bindings"}).when("/inbox/search",{templateUrl:"partials/setup/setup.html",controller:"SetupWizardController",title:"Inbox"}).when("/inbox/setup/bindings",{templateUrl:"partials/setup/setup.html",controller:"SetupWizardController",title:"Inbox"}).when("/inbox/setup/search/:bindingId",{templateUrl:"partials/setup/setup.html",controller:"SetupWizardController",title:"Inbox"}).when("/inbox/setup/thing-types/:bindingId",{templateUrl:"partials/setup/setup.html",controller:"SetupWizardController",title:"Inbox"}).when("/inbox/setup/add/:thingTypeUID",{templateUrl:"partials/setup/setup.html",controller:"SetupWizardController",title:"Inbox"}).when("/configuration",{redirectTo:"/configuration/bindings"}).when("/configuration/services",{templateUrl:"partials/services/configuration.services.html",controller:"ServicesController",title:"Configuration",reloadOnSearch:!1}).when("/configuration/services/:servicePID",{templateUrl:"partials/services/configuration.multiService.html",controller:"MultiServicesController",title:"Configuration"}).when("/configuration/things",{templateUrl:"partials/things/configuration.things.html",controller:"ThingController",title:"Configuration"}).when("/configuration/things/view/:thingUID",{templateUrl:"partials/things/configuration.things.html",controller:"ThingController",title:"Configuration"}).when("/configuration/things/edit/:thingUID",{templateUrl:"partials/things/configuration.things.html",controller:"ThingController",title:"Configuration"}).when("/configuration/system",{templateUrl:"partials/system/system.configuration.html",controller:"SystemController",title:"Configuration"}).when("/extensions",{templateUrl:"partials/extensions/extensions.html",controller:"ExtensionPageController",title:i.extensions&&i.extensions.hasOwnProperty("label")&&i.extensions.label?i.extensions.label:"Extensions",reloadOnSearch:!1}).when("/rules",{templateUrl:"partials/rules/rules.html",controller:"RulesPageController",title:"Rules"}).when("/rules/new",{templateUrl:"partials/rules/rules.html",controller:"RulesPageController",title:"Rules"}).when("/rules/catalog",{templateUrl:"partials/rules/rules.html",controller:"ExtensionPageController",title:"Rules"}).when("/rules/template/:templateUID",{templateUrl:"partials/rules/rules.html",controller:"RuleTemplateController",title:"Rules"}).when("/rules/configure/:ruleUID",{templateUrl:"partials/rules/rules.html",controller:"RulesPageController",title:"Rules"}).when("/preferences",{templateUrl:"partials/preferences.html",controller:"PreferencesPageController",title:"Preferences"}),r.defaultRoute?e.otherwise({redirectTo:r.defaultRoute}):e.otherwise({redirectTo:"/control"}),n.shortMonths=o.getMonths(!0),n.formatDate=function(e){return e?e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear():null},n.parseDate=function(e){if(!e)return null;var t=e.split(/[\s\/,.:-]+/);return t.length>2?new Date(t[1]+"."+t[0]+"."+t[2]):void 0}}]).directive("editableitemstate",function(){return function(e,t){t.context.addEventListener("focusout",function(r){e.sendCommand($(t).html())})}}).directive("onFinishRender",["$timeout",function(e){return{restrict:"A",link:function(t,r,n){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}]).directive("isrequired",function(){return{restrict:"A",require:"ngModel",link:function(e,t,r,n){e.$watch(r.ngModel,function(e){void 0!==e&&""!==e||"true"!=r.isrequired?t.removeClass("border-invalid"):t.addClass("border-invalid")})}}}).directive("customFocus",function(){return{restrict:"A",link:function(e,t,r,n){t[0]&&t[0].childNodes&&t[0].childNodes.length>1&&t[0].children[1].childNodes&&t[0].childNodes[1].childNodes.length>0&&(t[0].childNodes[1].childNodes[0].addEventListener("focus",function(){e.focus=!0,e.initial=!1,e.$apply()}),t[0].childNodes[1].childNodes[0].addEventListener("blur",function(){e.focus=!1,e.$apply()}))}}}).directive("colorSelect",function(){return{restrict:"A",require:"ngModel",link:function(e,t,r,n){t[0].addEventListener("click",function(){e.configuration[e.parameter.name]||(e.configuration[e.parameter.name]="#ffffff")})}}}).directive("colorRemove",function(){return{restrict:"A",require:"ngModel",link:function(e,t,r,n){t[0].addEventListener("click",function(){e.configuration[e.parameter.name]=void 0,e.$apply()})}}}).directive("dayOfWeek",function(){return{restrict:"A",link:function(e,t,r,n){if(t[0]&&t[0].children&&t[0].children.length>1){e.configuration[e.parameter.name]||(e.configuration[e.parameter.name]="true"==r.multi?[]:"","true"==r.ngRequired&&$(t[0]).addClass("border-invalid"));for(var i=0;i<t[0].children.length;i++)e.configuration[e.parameter.name].indexOf(t[0].children[i].value)!=-1&&$(t[0].children[i]).addClass("dow-selected"),t[0].children[i].addEventListener("click",function(n){if($(t[0]).removeClass("border-invalid"),"true"==r.multi){e.configuration[e.parameter.name]||(e.configuration[e.parameter.name]=[]);var i=e.configuration[e.parameter.name].indexOf(n.target.value);i==-1?(e.configuration[e.parameter.name].push(n.target.value),$(n.target).addClass("dow-selected")):(e.configuration[e.parameter.name].splice(i,1),$(n.target).removeClass("dow-selected"),0==e.configuration[e.parameter.name].length&&(e.configuration[e.parameter.name]=null,r.required&&$(t[0]).addClass("border-invalid")))}else""==e.configuration[e.parameter.name]||e.configuration[e.parameter.name]!=n.target.value?(e.configuration[e.parameter.name]!=n.target.value&&$(t[0].children).removeClass("dow-selected"),e.configuration[e.parameter.name]=n.target.value,$(n.target).addClass("dow-selected")):(e.configuration[e.parameter.name]=null,$(n.target).removeClass("dow-selected"),r.required&&$(t[0]).addClass("border-invalid"))})}}}}).directive("copyclipboard",["toastService",function(e){return{restrict:"A",link:function(t,r,n){r[0].addEventListener("click",function(){var t=document.createElement("input");t.value=n.copyclipboard;var r=document.getElementsByTagName("body")[0];r.appendChild(t),t.select();var i=document.execCommand("copy");i?e.showDefaultToast("Text copied to clipboard"):e.showDefaultToast("Could not copy to clipboard"),r.removeChild(t)})}}}]).directive("longPress",["$timeout",function(e){return{restrict:"A",link:function(t,r,n){var i,o=!1;r[0].addEventListener("mousedown",function(r){i=e(function(){o=!0,n.onLongPress&&t.$apply(function(){t.$eval(n.onLongPress,{$event:r})})},400)}),r[0].addEventListener("mouseup",function(r){e.cancel(i),!o&&n.onClick&&t.$apply(function(){t.$eval(n.onClick,{$event:r})}),o=!1})}}}]).directive("verticalAlign",function(){return{restrict:"A",link:function(e,t,r){function n(){var e=56-t[0].clientHeight;e>0&&(t[0].style.cssText="margin-top:"+Math.floor(e/2)+"px")}t[0].addEventListener("load",function(){n()})}}}).directive("overflown",function(){return{restrict:"A",link:function(e,t,r){setTimeout(function(){t.innerWidth()<t[0].children[0].scrollWidth?$(t[0].children[0]).addClass("reducedWidth"):$(t[0].children[1]).addClass("hidden")}),t[0].children[1].addEventListener("click",function(e){t.toggleClass("nowrap"),t[0].children[1].innerText="more"==e.target.innerText?"less":"more"})}}}).run(["$location","$rootScope","globalConfig",function(e,t,r){e.path;t.$on("$routeChangeSuccess",function(r,n,i){n.hasOwnProperty("$$route")&&(t.title=n.$$route.title,t.simpleHeader=n.$$route.simpleHeader),t.path=e.path().split("/"),t.section=t.path[1],t.page=t.path[2]}),t.asArray=function(e){return $.isArray(e)?e:e?[e]:[]},t.data=[],t.navigateToRoot=function(){e.path("")},t.$location=e;var n=localStorage.getItem("paperui.advancedMode");"true"!==n&&"false"!==n?t.advancedMode=r.advancedDefault:t.advancedMode="true"===n}]);