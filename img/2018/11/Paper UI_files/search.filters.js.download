angular.module("PaperUI").directive("searchFilters",function(){return{restrict:"A",link:function(e,t,r){function n(t){var r=$.grep(e.selectedOptions,function(e){return e.value});if(0==r.length)return!0;for(var n=0;n<r.length;n++){var i=r[n];if(t[i.targetField]){var a=i.sourceField?i.value[i.sourceField]:i.value;if(Array.isArray(t[i.targetField])){if(t[i.targetField].indexOf(a)==-1)return!1}else if(t[i.targetField]!=a)return!1}}return!0}function i(t){var r=t;e.$watch(function(){var e=angular.element(r);return e.attr("aria-hidden")},function(e){if("false"==e){setTimeout(function(){var e=$(r).find(".md-virtual-repeat-sizer");if(e){var t=e.attr("style");if(t){var n=t.split(":");n.length>1&&(r.style.height=parseInt(n[1])+"px")}}},10)}})}e.selectedOptions=[];for(var a=$(t).find(".md-filter"),s=0;s<a.length;s++){var o=a[s].attributes.config;if(o&&o.value){var l=JSON.parse(o.value);l&&(e.selectedOptions[l.index]={targetField:l.targetField,value:"",sourceField:l.sourceField?l.sourceField:void 0})}}e.filterItems=function(t){return function(r){var i=n(r);if(e.searchText&&e.searchText.length>0){for(var a=0;a<t.length;a++)if(r[t[a]]&&r[t[a]].toUpperCase().indexOf(e.searchText.toUpperCase())!=-1)return i;return!1}return i}},e.setSelectedOption=function(t,r){r instanceof Object&&"Group"==r.type?(e.searchType="",e.selectedOptions[t].value=r,e.showMore=!0):r instanceof Object||(e.selectedOptions[t].value=r,e.showMore=!0)},e.searchInOptions=function(e,t,r){return r&&0!=e.length?$.grep(e,function(e){if(t){for(var n=0;n<t.length;n++){var i=t[n];if(e.hasOwnProperty(i)&&""!=e[i]&&e[i].toUpperCase().indexOf(r.toUpperCase())!=-1)return!0}return!1}return e&&e.toUpperCase().indexOf(r.toUpperCase())!=-1}):e},e.$on("ClearFilters",function(){e.searchType="",e.searchGroup=""});for(var u=document.getElementsByClassName("md-autocomplete-suggestions-container"),s=0;s<u.length;s++)i(u[s])}}});